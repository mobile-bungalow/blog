<!DOCTYPE html>
<html>
<head>
    <script>
        const scroll_pass = (e) => { console.log(e); e.preventDefault(); }
    </script>
</head>
  <body id="body" style="margin:0;"
   onresize="window.global_tx.resize(document.getElementById('myCanvas').offsetWidth, document.getElementById('myCanvas').offsetHeight)">
    <canvas id="myCanvas"></canvas>
   <script type="module">
    import init, { new_ctx, App, MessageQueue, InputList } from "./pkg/tweak_shader_web.js";

      init().then(() => {
        let str = ``;
        window.global_tx = MessageQueue.new();
        window.global_input_list = InputList.new();
        window.init_callback();
        let list = window.global_input_list.clone();
        let rx = window.global_tx.clone();
      App.new(str, "myCanvas", rx, list, e => window.error_callback(e)).then(
          function(app) { 
            app.run();
          },
          function(error) { console.log(error) }
          );

      });
    </script>
</body>
</html>
